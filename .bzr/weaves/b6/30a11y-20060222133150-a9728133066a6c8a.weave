# bzr weave file v5
i
1 f6c9421df91e113a281737a46909aa301374453c
n tfheen@ubuntu.com-20060222133624-e0910882b853bfb8

i 0
1 2a45ebe88c802c10c5ebe4f8e568cf616996759a
n luke@linden-20060223040245-b37bfbd33684674c

i 1
1 5520afac313e0a90634f5ce3eed349d057566a17
n luke@linden-20060223114632-833871caceba47ec

i 1
1 aaab699c61ab26e6077f45bc3c43dd56227842c7
n luke@linden-20060223114738-1c2015797af3acb7

i 3
1 d4870698cd3617dc5c4d06fe62276c3c07ff30a2
n tfheen@ubuntu.com-20060228102108-9519af5eefd1c760

i 4
1 aa7a25ee26e0c1e734e9767069e7285f19a023b2
n luke@linden-20060324130045-a8638bd1ca73e342

i 4
1 aa7a25ee26e0c1e734e9767069e7285f19a023b2
n themuso@themuso.com-20060403121419-96918035d2d4f256

i 4
1 aa7a25ee26e0c1e734e9767069e7285f19a023b2
n themuso@themuso.com-20060403121328-e7cdf0cc1ec71c68

i 6
1 c06a3ecf63014945a24cdd07ce60d34e066a59a2
n tfheen@ubuntu.com-20060411133748-e43472f5e52001dc

i 8
1 f327a78a50d100aa549c3bbd870deeeb7ef276fd
n tfheen@ubuntu.com-20060411141541-6e87088e8da2ef74

i 9
1 4df74bfd6be64193aa73980317adadc20610dba1
n tfheen@ubuntu.com-20060411142432-5c8e49764aaaf8e0

w
{ 0
. #!/bin/sh
. 
. PREREQ=""
. DESCRIPTION="Configuring accessibility options"
. 
. . /scripts/functions
. 
. prereqs()
. {
.        echo "$PREREQ"
. }
. 
. case $1 in
. # get pre-requisites
. prereqs)
.        prereqs
.        exit 0
.        ;;
. esac
. 
. log_begin_msg "$DESCRIPTION"
{ 1
. 
[ 3
. # Set up some generic accessibility options, as a user may choose to run
. # gnopernicus after the CD has booted, and no accessibility option was chosen.
. # By default, the gnome accessibility interface is on, and some usable
. # magnification settings are set for gnopernicus.
. 
] 3
[ 4
. A11YSCRIPT=/root/tmp/a11y-gnome
. cat <<EOF > $A11YSCRIPT
. #!/bin/sh
. 
[ 2
[ 3
. gconftool-2 -s -t bool /desktop/gnome/interface/accessibility true
. gconftool-2 -s -t bool /apps/gnopernicus/magnifier/schema1/generic_zoomer/zoom_factor_lock true
. gconftool-2 -s -t float /apps/gnopernicus/magnifier/schema1/generic_zoomer/zoom_factor_size_x 8
. gconftool-2 -s -t float /apps/gnopernicus/magnifier/schema1/generic_zoomer/zoom_factor_y 8
. gconftool-2 -s -t integer /apps/gnopernicus/magnifier/schema1/generic_zoomer/zp_top 540
. gconftool-2 -s -t integer /apps/gnopernicus/magnifier/schema1/generic_zoomer/zp_height 767
. gconftool-2 -s -t integer /apps/gnopernicus/magnifier/schema1/generic_zoomer/zp_left 0
. gconftool-2 -s -t integer /apps/gnopernicus/magnifier/schema1/generic_zoomer/zp_width 1023
. gconftool-2 -s -t bool /apps/gnopernicus/srcore/mag_active true
] 2
] 3
. EOF
] 4
{ 4
. gct() {
[ 8
. chroot /root gconftool-2 "$@"
] 8
{ 8
[ 9
. chroot /root su ubuntu -c gconftool-2 -s --direct "$@"
}
] 9
{ 9
[ 10
. chroot /root su ubuntu -- gconftool-2 --direct -s "$@"
}
] 10
{ 10
. chroot /root su ubuntu -- gconftool-2 -s "$@"
}
. }
}
. 
. for x in $(cat /proc/cmdline); do
.                 case $x in
.                         # Lesser Visual Impairment
.                         access=v1)
[ 4
.                                 cat <<EOF >> $A11YSCRIPT
. gconftool-2 -s -t string /desktop/gnome/interface/gtk_thene HighContrastLargePrint
. gconftool-2 -s -t string /desktop/gnome/interface/icon_theme HighContrast
. gconftool-2 -s -t string /apps/metacity/general/theme Atlanta
. EOF
] 4
{ 4
[ 8
.                         gct -s -t string /desktop/gnome/interface/gtk_thene HighContrastLargePrint
.                         gct -s -t string /desktop/gnome/interface/icon_theme HighContrast
.                         gct -s -t string /apps/metacity/general/theme Atlanta
}
] 8
{ 8
.                         gct -t string /desktop/gnome/interface/gtk_thene HighContrastLargePrint
.                         gct -t string /desktop/gnome/interface/icon_theme HighContrast
.                         gct -t string /apps/metacity/general/theme Atlanta
}
. # TODO - Mouse cursor.
[ 4
.                                 ;;
] 4
{ 4
.                         ;;
}
.                         # Moderate Visual Impairment
.                         access=v2)
[ 4
.                                 cat <<EOF >> $A11YSCRIPT
{ 2
. gconftool-2 -s -t bool /desktop/gnome/interface/accessibility true
}
{ 3
. gconftool-2 -s -t bool /desktop/gnome/interface/accessibility true
}
. gconftool-2 -s -t list /desktop/gnome/accessibility/startup/exe_ats gnopernicus
{ 2
. gconftool-2 -s -t bool /apps/gnopernicus/magnifier/schema1/generic_zoomer/zoom_factor_lock true
. gconftool-2 -s -t float /apps/gnopernicus/magnifier/schema1/generic_zoomer/zoom_factor_size_x 8
. gconftool-2 -s -t float /apps/gnopernicus/magnifier/schema1/generic_zoomer/zoom_factor_y 8
. gconftool-2 -s -t integer /apps/gnopernicus/magnifier/schema1/generic_zoomer/zp_top 540
. gconftool-2 -s -t integer /apps/gnopernicus/magnifier/schema1/generic_zoomer/zp_height 767
. gconftool-2 -s -t integer /apps/gnopernicus/magnifier/schema1/generic_zoomer/zp_left 0
. gconftool-2 -s -t integer /apps/gnopernicus/magnifier/schema1/generic_zoomer/zp_width 1023
. gconftool-2 -s -t bool /apps/gnopernicus/srcore/mag_active true
}
{ 3
. gconftool-2 -s -t bool /apps/gnopernicus/magnifier/schema1/generic_zoomer/zoom_factor_lock true
. gconftool-2 -s -t float /apps/gnopernicus/magnifier/schema1/generic_zoomer/zoom_factor_size_x 8
. gconftool-2 -s -t float /apps/gnopernicus/magnifier/schema1/generic_zoomer/zoom_factor_y 8
. gconftool-2 -s -t integer /apps/gnopernicus/magnifier/schema1/generic_zoomer/zp_top 540
. gconftool-2 -s -t integer /apps/gnopernicus/magnifier/schema1/generic_zoomer/zp_height 767
. gconftool-2 -s -t integer /apps/gnopernicus/magnifier/schema1/generic_zoomer/zp_left 0
. gconftool-2 -s -t integer /apps/gnopernicus/magnifier/schema1/generic_zoomer/zp_width 1023
. gconftool-2 -s -t bool /apps/gnopernicus/srcore/mag_active true
}
. gconftool-2 -s -t bool /apps/gnopernicus/srcore/sp_active false
. EOF
.                                 ;;
] 4
{ 4
[ 8
.                         gct -s -t bool /desktop/gnome/interface/accessibility true
.                         gct -s -t list /desktop/gnome/accessibility/startup/exe_ats gnopernicus
[ 5
[ 6
[ 7
.                         gct -s -t bool /apps/gnopernicus/magnifier/schema1/generic_zoomer/zoom_factor_lock true
.                         gct -s -t float /apps/gnopernicus/magnifier/schema1/generic_zoomer/zoom_factor_size_x 8
.                         gct -s -t float /apps/gnopernicus/magnifier/schema1/generic_zoomer/zoom_factor_y 8
.                         gct -s -t integer /apps/gnopernicus/magnifier/schema1/generic_zoomer/zp_top 540
.                         gct -s -t integer /apps/gnopernicus/magnifier/schema1/generic_zoomer/zp_height 767
.                         gct -s -t integer /apps/gnopernicus/magnifier/schema1/generic_zoomer/zp_left 0
.                         gct -s -t integer /apps/gnopernicus/magnifier/schema1/generic_zoomer/zp_width 1023
] 5
] 6
] 7
.                         gct -s -t bool /apps/gnopernicus/srcore/mag_active true
.                         gct -s -t bool /apps/gnopernicus/srcore/sp_active false
] 8
{ 8
.                         gct -t bool /desktop/gnome/interface/accessibility true
.                         gct -t list /desktop/gnome/accessibility/startup/exe_ats gnopernicus
.                         gct -t bool /apps/gnopernicus/srcore/mag_active true
.                         gct -t bool /apps/gnopernicus/srcore/sp_active false
}
.                         ;;
}
.                         # Blindness
.                         access=v3)
[ 4
.                                 cat <<EOF >> $A11YSCRIPT
. gconftool-2 -s -t bool /desktop/gnome/sound/enable_esd false
. gconftool-2 -s -t list /desktop/gnome/accessibility/startup/exe_ats gnopernicus
[ 2
[ 3
. gconftool-2 -s -t bool /apps/gnopernicus/srcore/mag_active false
] 2
] 3
. gconftool-2 -s -t bool /apps/gnopernicus/srcore/sp_active true
. EOF
.                                 ;;
] 4
{ 4
[ 8
.                         gct -s -t bool /desktop/gnome/sound/enable_esd false
.                         gct -s -t list /desktop/gnome/accessibility/startup/exe_ats gnopernicus
.                         gct -s -t bool /apps/gnopernicus/srcore/sp_active true
] 8
{ 8
.                         gct -t bool /desktop/gnome/sound/enable_esd false
.                         gct -t list /desktop/gnome/accessibility/startup/exe_ats gnopernicus
.                         gct -t bool /apps/gnopernicus/srcore/sp_active true
}
.                         ;;
}
.                         # Minor Motor Difficulties
.                         access=m1)
[ 4
.                                 cat <<EOF >> $A11YSCRIPT
. gconftool-2 -s -t bool /desktop/gnome/accessibility/keyboard/enable true
. gconftool-2 -s -t bool /desktop/gnome/accessibility/keyboard/mousekeys_enable true
. gconftool-2 -s -t bool /desktop/gnome/accessibility/keyboard/stickykeys_enable true
. gconftool-2 -s -t bool /desktop/gnome/accessibility/keyboard/stickykeys_modifier_beep true
. gconftool-2 -s -t bool /desktop/accessibility/gnome/keyboard/stickykeys_two_key_off false
. gconftool-2 -s -t bool /desktop/gnome/peripherals/keyboard/repeat true
. gconftool-2 -s -t integer /desktop/gnome/peripherals/keyboard/delay 700
. gconftool-2 -s -t integer /desktop/gnome/peripherals/keyboard/rate 10
. EOF
.                                 ;;
] 4
{ 4
[ 8
.                         gct -s -t bool /desktop/gnome/accessibility/keyboard/enable true
.                         gct -s -t bool /desktop/gnome/accessibility/keyboard/mousekeys_enable true
.                         gct -s -t bool /desktop/gnome/accessibility/keyboard/stickykeys_enable true
.                         gct -s -t bool /desktop/gnome/accessibility/keyboard/stickykeys_modifier_beep true
.                         gct -s -t bool /desktop/accessibility/gnome/keyboard/stickykeys_two_key_off false
.                         gct -s -t bool /desktop/gnome/peripherals/keyboard/repeat true
.                         gct -s -t integer /desktop/gnome/peripherals/keyboard/delay 700
.                         gct -s -t integer /desktop/gnome/peripherals/keyboard/rate 10
] 8
{ 8
.                         gct -t bool /desktop/gnome/accessibility/keyboard/enable true
.                         gct -t bool /desktop/gnome/accessibility/keyboard/mousekeys_enable true
.                         gct -t bool /desktop/gnome/accessibility/keyboard/stickykeys_enable true
.                         gct -t bool /desktop/gnome/accessibility/keyboard/stickykeys_modifier_beep true
.                         gct -t bool /desktop/accessibility/gnome/keyboard/stickykeys_two_key_off false
.                         gct -t bool /desktop/gnome/peripherals/keyboard/repeat true
.                         gct -t integer /desktop/gnome/peripherals/keyboard/delay 700
.                         gct -t integer /desktop/gnome/peripherals/keyboard/rate 10
}
.                         ;;
}
.                         # Motor Difficulties - pointing devices
.                         access=m2)
[ 4
.                                 cat <<EOF >> $A11YSCRIPT
. gconftool-2 -s -t bool /desktop/gnome/accessibility/keyboard/enable true
. gconftool-2 -s -t bool /desktop/gnome/accessibility/keyboard/stickykeys_enable true
. gconftool-2 -s -t bool /desktop/gnome/accessibility/keyboard/stickykeys_modifier_beep false
. gconftool-2 -s -t bool /desktop/accessibility/gnome/keyboard/stickykeys_two_key_off false
. gconftool-2 -s -t list /desktop/gnome/accessibility/startup/exe_ats gok
. EOF
.                                 ;;
] 4
{ 4
[ 8
.                         gct -s -t bool /desktop/gnome/accessibility/keyboard/enable true
.                         gct -s -t bool /desktop/gnome/accessibility/keyboard/stickykeys_enable true
.                         gct -s -t bool /desktop/gnome/accessibility/keyboard/stickykeys_modifier_beep false
.                         gct -s -t bool /desktop/accessibility/gnome/keyboard/stickykeys_two_key_off false
.                         gct -s -t list /desktop/gnome/accessibility/startup/exe_ats gok
] 8
{ 8
.                         gct -t bool /desktop/gnome/accessibility/keyboard/enable true
.                         gct -t bool /desktop/gnome/accessibility/keyboard/stickykeys_enable true
.                         gct -t bool /desktop/gnome/accessibility/keyboard/stickykeys_modifier_beep false
.                         gct -t bool /desktop/accessibility/gnome/keyboard/stickykeys_two_key_off false
.                         gct -t list /desktop/gnome/accessibility/startup/exe_ats gok
}
.                         ;;
}
. 		esac
. done
[ 4
. 
. # Run the script, and clean up.
. chmod +x $A11YSCRIPT
. chroot /root /tmp/a11y-gnome
. rm $A11YSCRIPT
. 
}
] 4
. log_end_msg
}
W
